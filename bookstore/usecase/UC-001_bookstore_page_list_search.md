# ユースケース記述：書店ページ対象ライブラリ一覧表示

## 1. ユースケースID
UC-001

## 2. ユースケース名
システム利用者が書店ページ対象ライブラリ一覧を閲覧する

## 3. 概要
システム利用者がビブリオンシステムに登録されている書店ページ対象ライブラリの一覧を閲覧するプロセスを記述します。書店名、Library ID、登録日時、更新日時などの情報を確認できます。

## 4. アクター
システム利用者（書店ページ管理者）

## 5. 事前条件
* システム利用者がビブリオンシステムにアクセス可能であること（IPアドレス制限による認証）。
* システムが正常に稼働しており、AWS Amplify Dataへアクセス可能であること。
* 書店ページ対象ライブラリデータがAmplify Dataに登録済みであること。

## 6. 事後条件
* **成功時:**
    * 書店ページ対象ライブラリの一覧がテーブル形式で表示される。
    * 各ライブラリには、書店名、Library ID、登録日時、更新日時が表示される。
    * 一覧は登録日時の降順でソートされて表示される。
    * 各行に「編集」ボタンと「削除」ボタンが配置される。
    * 画面上部に「新規登録」ボタンが表示される。
* **失敗時:**
    * ライブラリ一覧が正しく表示されない。
    * 適切なエラーメッセージが表示される（例：「書店ページ情報の取得に失敗しました。」）。

## 7. トリガー
システム利用者がサイドメニューの「書店ページ対象ライブラリ一覧」をクリックする、またはシステム初期表示時。

## 8. 基本フロー（主成功シナリオ）
| No. | アクターのアクション                                                                                          | システムのレスポンス                                                                                                                                                                                                       |
| :-: | :-------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|  1  | 書店ページ一覧ページを開く。                                                                                      | システムは、検索/フィルタリング条件入力欄（ページ名など）、検索実行ボタン、および書店ページ一覧表示エリア、ページネーションコントロールエリアを持つ書店ページ一覧ページを表示する。初期状態では、全書店ページまたはデフォルトソート順で最初のN件の書店ページ情報をデータベースから取得し、一覧表示エリアに表示する。一覧には各書店ページの主要情報（ページ名、URL、公開状態など）と、総件数、現在のページ番号等を表示する。 |
|  2  | （検索・フィルタリング操作）ページ名などの検索フィールドにキーワードを入力し、「検索」ボタンを押下する。または、用意されたフィルタオプション（例：公開状態[公開中/非公開]、作成日など）を選択する。 |                                                                                                                                                                                                                  |
|  3  |                                                                                                     | システムは入力されたキーワードおよび選択されたフィルター条件に基づき、書店ページデータベースを検索する。                                                                                                                                                             |
|  4  |                                                                                                     | システムは検索結果の最初のN件を書店ページ一覧表示エリアに表示する。検索結果の総件数とページネーションを更新する。もし検索結果が0件の場合は、「該当する書店ページが見つかりませんでした。」というメッセージを表示する。                                                                                                     |
|  5  | （ページング操作）表示されている一覧の下部（または上部）にあるページネーションコントロール（例：「次へ」「2」「3」など）をクリックする。                               |                                                                                                                                                                                                                  |
|  6  |                                                                                                     | システムは指定されたページ番号に対応する書店ページデータを（現在の検索・フィルタリング条件を維持したまま）データベースから取得し、書店ページ一覧表示エリアを更新する。現在のページ番号表示も更新する。                                                                                                              |
|  7  |                                                                                                     | ユースケースは、書店員が書店ページ一覧の閲覧・検索を続けるか、他の画面へ遷移するまでNo.2またはNo.5から継続する。                                                                                                                                                     |

## 9. 代替フロー（例外シナリオ）
* **AF-001: データ取得エラー**
    * 基本フロー2において、Amplify Dataからのデータ取得に失敗した場合（API接続エラー、タイムアウト等）：
        1.  システムは一覧表示エリアにエラーメッセージ（例：「書店ページ情報の取得に失敗しました。しばらくしてから再読み込みしてください。」）を表示する。
        2.  ユースケースは終了する、またはシステム利用者による再読み込み操作を待つ。

* **AF-002: システムエラー**
    * ユースケースのいずれかのステップにおいて、予期せぬシステム内部エラー（GraphQL APIの障害、サーバーエラー等）が発生した場合：
        1.  システムは汎用的なエラーメッセージ（例：「システムエラーが発生しました。ご迷惑をおかけし申し訳ございませんが、しばらく時間をおいてから再度お試しください。」）を表示する。
        2.  ユースケースは終了する。

## 10. 備考・補足事項
* **表示項目:** 書店ページ対象ライブラリ一覧に表示する項目は、書店名、Library ID、登録日時、更新日時に固定。
* **ソート機能:** デフォルトソートは登録日時の降順（created_at フィールド）。
* **認証:** IPアドレス制限のみ。システム利用者は全員同じ権限を持つ。
* **データストア:** AWS Amplify Data (GraphQL API) を利用してデータを保存・管理。
* **将来機能:** 検索フィルター、ページネーションの実装を検討。
* **編集・削除機能への導線:** 各行の「編集」ボタンで編集画面へ遷移、「削除」ボタンで削除確認ダイアログ表示。
* **新規登録への導線:** 画面上部の「新規登録」ボタンで登録画面へ遷移。
* **技術実装:** AWS Amplify Gen 2を利用し、バックエンドはAmplify Functions、クライアントサイドはReactで構築。
